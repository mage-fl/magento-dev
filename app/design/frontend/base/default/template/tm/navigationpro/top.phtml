<?php
/**
 * Top menu for store
 *
 * @see TM_NavigationPro_Block_Navigation
 */
?>
<?php
    $_menu = $this->getHtml('level-top');
    $_id   = $this->getHtmlId();
?>

<?php if ($_menu) : ?>
<div class="nav-container">
    <ul id="<?php echo $_id ?>" class="navpro navpro-inline <?php echo $this->getStyle() ?>">
        <?php echo $_menu ?>
    </ul>
    <?php if ($this->getCreateMobileMenu()) : ?>
        <?php $_mobileId = $_id . '-mobile'; ?>
        <div class="navpro-mobile-toggle" data-menu="<?php echo $_mobileId ?>">
            <span class="navpro-mobile-toggle-icon">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </span>
            <span class="navpro-mobile-toggle-label"><?php echo $this->__('Menu') ?></span>
        </div>
        <ul id="<?php echo $_mobileId ?>" class="navpro-mobile <?php echo $this->getStyle() ?>">
            <?php echo $_menu ?>
        </ul>
        <script type="text/javascript">
        document.observe("dom:loaded", function() {
            navPro("<?php echo $_mobileId ?>", {
                show_delay: 100,
                hide_delay: 100,
                dropdown_side: "<?php echo $this->getDropdownSide() ?>",
                fit_width: false
            });
        });
        transformMenu('<?php echo $_mobileId ?>');
        new accordion('<?php echo $_mobileId ?>');
        </script>
    <?php endif ?>
</div>

<script type="text/javascript">
document.observe("dom:loaded", function() {
    navPro("<?php echo $_id ?>", {
        show_delay: 100,
        hide_delay: 100,
        dropdown_side: "<?php echo $this->getDropdownSide() ?>",
        constraint_el: $("<?php echo $_id ?>")
    });
});
new accordion('<?php echo $_id ?>');
</script>
<?php endif ?>
